# Neo4j 本地安装与快速验证（Windows）

本文档帮助你在 Windows 上使用 Neo4j Desktop 完成本地安装、初始化与连接验证。

## 1. 安装与启动
- 已通过 winget 安装 `Neo4j Desktop`（开始菜单可搜索“Neo4j Desktop”）。
- 首次启动后：
  - 建议创建一个 Project（例如 `mapKnowledge`）。
  - 在 Project 内选择“Add -> Local DBMS”，选择 Neo4j 版本（保持默认最新 5.x 即可）。
  - 为数据库设置一个密码（记住它，后面连接需要）。
  - 点击“Start”启动 DBMS。

## 2. 初始验证（Neo4j Browser）
- 在 Neo4j Desktop 中点击“Open”打开 Neo4j Browser。
- 登录：
  - URI: `bolt://localhost:7687`
  - 用户名: `neo4j`
  - 密码: 你在创建 DBMS 时设置的密码
- 在 Browser 中执行：
  ```cypher
  RETURN 1 AS ok;
  ```
  若返回 `ok = 1`，则连接与查询正常。

## 3. 通过 Python 进行连接测试
示例脚本位于 `neo4j_examples/neo4j_test.py`。建议先创建虚拟环境并安装依赖：

```powershell
# 进入示例目录
Set-Location "d:\vsprogram\mapKnowledge\neo4j_examples"

# (可选) 创建与激活虚拟环境
python -m venv .venv
. .\.venv\Scripts\Activate.ps1

# 安装依赖
pip install -r requirements.txt

# 设置连接信息（根据你的密码调整）
$env:NEO4J_URI = "bolt://localhost:7687"
$env:NEO4J_USER = "neo4j"
$env:NEO4J_PASSWORD = "<你的密码>"

# 运行测试脚本
python .\neo4j_test.py
```

脚本会：
- 连接到本地 Neo4j；
- 创建一个演示用节点（带随机后缀避免重复）；
- 读取并输出节点数量；
- 最后清理刚创建的演示节点。

## 4. 常见问题
- 端口冲突：确保 `7687`（Bolt）与 `7474`（HTTP）未被其他程序占用。
- 密码错误：可在 Neo4j Desktop 停止 DBMS 后，使用“Manage -> Settings/Logs/Reset Password”等路径排查。
- 权限问题：若安装或启动时出现权限弹窗，请允许 UAC。

## 5. 下一步（构建知识图谱）
- 设计图谱 schema（标签、关系类型、关键属性）。
- 使用 Cypher 批量导入节点/关系，或通过驱动（Python/Java/JS）从你的数据源写入。
- 需要，我可以为 `mapKnowledge` 项目补充导入脚本（CSV/JSON）与简单的 ETL 管线。
